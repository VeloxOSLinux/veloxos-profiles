#!/bin/bash
# VeloxOS Dynamic zRAM Setup

# PrÃ¼fe, ob zram0 bereits aktiv ist
if grep -q "/dev/zram0" /proc/swaps; then
    exit 0
fi

# Berechne 50% des RAMs
TOTAL_RAM=$(free -m | awk '/^Mem:/{print $2}')
ZRAM_SIZE=$((TOTAL_RAM / 2))

# Initialisierung
modprobe zram
echo zstd > /sys/block/zram0/comp_algorithm
echo "${ZRAM_SIZE}M" > /sys/block/zram0/disksize
mkswap /dev/zram0
swapon /dev/zram0 -p 100
